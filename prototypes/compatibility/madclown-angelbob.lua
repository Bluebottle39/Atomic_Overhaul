-----------------------------------------------------------------------------------------------
-- MadClown01 if you want me to change something then create an issue/pull request on github.--
-----------------------------------------------------------------------------------------------

-- make the resource items glow in the dark
data.raw["item"]["thorium-232"].pictures = {
    layers = {{
        size = 32, -- please try to make 64x64 icons with 4 mipmaps
        filename = "__Clowns-Nuclear__/graphics/icons/thorium-232.png",
        scale = 0.50
    }, {
        draw_as_light = true,
        flags = {"light"},
        size = 64,
        filename = "__Atomic_Overhaul__/graphics/icons/resource-light.png",
        scale = 0.25,
        mipmap_count = 4
    }}
}
data.raw["item"]["plutonium-239"].pictures = {
    layers = {{
        size = 32, -- please try to make 64x64 icons with 4 mipmaps
        filename = "__Clowns-Nuclear__/graphics/icons/plutonium-239.png",
        scale = 0.50
    }, {
        draw_as_light = true,
        flags = {"light"},
        size = 64,
        filename = "__Atomic_Overhaul__/graphics/icons/resource-light.png",
        scale = 0.25,
        mipmap_count = 4
    }}
}
data.raw["item"]["polonium-210"].pictures = {
    layers = {{
        size = 32, -- please try to make 64x64 icons with 4 mipmaps
        filename = "__Clowns-AngelBob-Nuclear__/graphics/icons/polonium-210.png",
        scale = 0.50
    }, {
        draw_as_light = true,
        flags = {"light"},
        size = 64,
        filename = "__Atomic_Overhaul__/graphics/icons/resource-light.png",
        scale = 0.25,
        mipmap_count = 4
    }}
}
data.raw["item"]["caesium-137"].pictures = {
    layers = {{
        size = 32, -- please try to make 64x64 icons with 4 mipmaps
        filename = "__Clowns-AngelBob-Nuclear__/graphics/icons/caesium-137.png",
        scale = 0.50
    }, {
        draw_as_light = true,
        flags = {"light"},
        size = 64,
        filename = "__Atomic_Overhaul__/graphics/icons/resource-light.png",
        scale = 0.25,
        mipmap_count = 4
    }}
}
data.raw["item"]["strontium-90"].pictures = {
    layers = {{
        size = 32, -- please try to make 64x64 icons with 4 mipmaps
        filename = "__Clowns-AngelBob-Nuclear__/graphics/icons/strontium-90.png",
        scale = 0.50
    }, {
        draw_as_light = true,
        flags = {"light"},
        size = 64,
        filename = "__Atomic_Overhaul__/graphics/icons/resource-light.png",
        scale = 0.25,
        mipmap_count = 4
    }}
}
data.raw["item"]["protactinium-231"].pictures = {
    layers = {{
        size = 32, -- please try to make 64x64 icons with 4 mipmaps
        filename = "__Clowns-AngelBob-Nuclear__/graphics/icons/protactinium-231.png",
        scale = 0.50
    }, {
        draw_as_light = true,
        flags = {"light"},
        size = 64,
        filename = "__Atomic_Overhaul__/graphics/icons/resource-light.png",
        scale = 0.25,
        mipmap_count = 4
    }}
}
data.raw["item"]["zinc-65"].pictures = {
    layers = {{
        size = 32, -- please try to make 64x64 icons with 4 mipmaps
        filename = "__Clowns-AngelBob-Nuclear__/graphics/icons/zinc-65.png",
        scale = 0.50
    }, {
        draw_as_light = true,
        flags = {"light"},
        size = 64,
        filename = "__Atomic_Overhaul__/graphics/icons/resource-light.png",
        scale = 0.25,
        mipmap_count = 4
    }}
}
data.raw["item"]["cobalt-60"].pictures = {
    layers = {{
        size = 32, -- please try to make 64x64 icons with 4 mipmaps
        filename = "__Clowns-AngelBob-Nuclear__/graphics/icons/cobalt-60.png",
        scale = 0.50
    }, {
        draw_as_light = true,
        flags = {"light"},
        size = 64,
        filename = "__Atomic_Overhaul__/graphics/icons/resource-light.png",
        scale = 0.25,
        mipmap_count = 4
    }}
}

-- make the fuel items glow in the dark
data.raw["item"]["hypernuclear-fuel"].pictures = {
    layers = {{
        size = 32, -- please try to make 64x64 icons with 4 mipmaps
        filename = "__Clowns-AngelBob-Nuclear__/graphics/icons/hypernuclear-fuel.png",
        scale = 0.50
    }, {
        draw_as_light = true,
        flags = {"light"},
        size = 64,
        filename = "__base__/graphics/icons/nuclear-fuel-light.png",
        scale = 0.25,
        mipmap_count = 4
    }}
}
data.raw["item"]["turbonuclear-fuel"].pictures = {
    layers = {{
        size = 32, -- please try to make 64x64 icons with 4 mipmaps
        filename = "__Clowns-AngelBob-Nuclear__/graphics/icons/turbonuclear-fuel.png",
        scale = 0.50
    }, {
        draw_as_light = true,
        flags = {"light"},
        size = 64,
        filename = "__base__/graphics/icons/nuclear-fuel-light.png",
        scale = 0.25,
        mipmap_count = 4
    }}
}
data.raw["item"]["radiothermal-fuel"].pictures = {
    layers = {{
        size = 32, -- please try to make 64x64 icons with 4 mipmaps
        filename = "__Clowns-AngelBob-Nuclear__/graphics/icons/radiothermal-fuel.png",
        scale = 0.50
    }, {
        draw_as_light = true,
        flags = {"light"},
        size = 64,
        filename = "__base__/graphics/icons/nuclear-fuel-light.png",
        scale = 0.25,
        mipmap_count = 4
    }}
}
data.raw["item"]["superradiothermal-fuel"].pictures = {
    layers = {{
        size = 32, -- please try to make 64x64 icons with 4 mipmaps
        filename = "__Clowns-AngelBob-Nuclear__/graphics/icons/superradiothermal-fuel.png",
        scale = 0.50
    }, {
        draw_as_light = true,
        flags = {"light"},
        size = 64,
        filename = "__base__/graphics/icons/nuclear-fuel-light.png",
        scale = 0.25,
        mipmap_count = 4
    }}
}
data.raw["item"]["ultraradiothermal-fuel"].pictures = {
    layers = {{
        size = 32, -- please try to make 64x64 icons with 4 mipmaps
        filename = "__Clowns-AngelBob-Nuclear__/graphics/icons/ultraradiothermal-fuel.png",
        scale = 0.50
    }, {
        draw_as_light = true,
        flags = {"light"},
        size = 64,
        filename = "__base__/graphics/icons/nuclear-fuel-light.png",
        scale = 0.25,
        mipmap_count = 4
    }}
}

data.raw["recipe"]["advanced-nuclear-fuel-reprocessing"].order = "b[nuclear-fuel-reprocessing]-c[advanced-nuclear-fuel-reprocessing]"
data.raw["recipe"]["thorium-nuclear-fuel-reprocessing"].order = "f"
data.raw["recipe"]["advanced-thorium-nuclear-fuel-reprocessing"].order = "g"
data.raw["recipe"]["advanced-thorium-nuclear-fuel-reprocessing|b"].order = "h"
data.raw["recipe"]["nuclear-fuel"].subgroup = "fuel"
data.raw["recipe"]["nuclear-fuel"].order = "a"
data.raw["recipe"]["hypernuclear-fuel"].subgroup = "fuel"
data.raw["recipe"]["hypernuclear-fuel"].order = "z"
data.raw["recipe"]["turbonuclear-fuel"].subgroup = "fuel"
data.raw["recipe"]["turbonuclear-fuel"].order = "z"
data.raw["recipe"]["radiothermal-fuel"].subgroup = "fuel"
data.raw["recipe"]["radiothermal-fuel"].order = "z"
data.raw["recipe"]["superradiothermal-fuel"].subgroup = "fuel"
data.raw["recipe"]["superradiothermal-fuel"].order = "z"
data.raw["recipe"]["ultraradiothermal-fuel"].subgroup = "fuel"
data.raw["recipe"]["ultraradiothermal-fuel"].order = "z"
data.raw["recipe"]["thorium-processing"].subgroup = "resources"
data.raw["recipe"]["thorium-processing"].order = "g"
data.raw["recipe"]["thorium-purification"].subgroup = "resources"
data.raw["recipe"]["thorium-purification"].order = "h"
data.raw["recipe"]["thorium-mixed-oxide"].subgroup = "fuel-cells"
data.raw["recipe"]["thorium-mixed-oxide"].order = "g"
data.raw["recipe"]["thorium-fuel-cell"].subgroup = "fuel-cells"
data.raw["recipe"]["thorium-fuel-cell"].order = "f"
data.raw["item"]["thorium-fuel-cell"].icon = graphics .. "thorium-fuel-cell.png"
data.raw["item"]["thorium-fuel-cell"].icon_size = 64
data.raw["item"]["thorium-fuel-cell"].icon_mipmaps = 4
data.raw["item"]["used-up-thorium-fuel-cell"].icon = graphics .. "thorium-used-up-fuel-cell.png"
data.raw["item"]["used-up-thorium-fuel-cell"].icon_size = 64
data.raw["item"]["used-up-thorium-fuel-cell"].icon_mipmaps = 4
data.raw["recipe"]["nuclear-fuel-reprocessing"].icon = base_graphics .. "nuclear-fuel-reprocessing.png"
data.raw["recipe"]["nuclear-fuel-reprocessing"].icon_size = 64
data.raw["recipe"]["nuclear-fuel-reprocessing"].icon_mipmaps = 4
data.raw["recipe"]["nuclear-fuel-reprocessing"].results = {{
    type = "item",
    name = "plutonium",
    amount_min = 1,
    amount_max = 3
}, {
    type = "item",
    name = "uranium-238",
    amount = 3
}, {
    type = "item",
    name = "nuclear-waste",
    amount = 5
}, {
    type = "item",
    name = "research-data",
    amount_min = 1,
    amount_max = 3
}}
data.raw["recipe"]["plutonium-atomic-bomb"].hidden = true
data.raw["item-subgroup"]["clowns-uranium-centrifuging"].group = "atomic-overhaul"
data.raw["item-subgroup"]["clowns-uranium-centrifuging"].order = "z"
data.raw["item-subgroup"]["clowns-nuclear-cells"].group = "atomic-overhaul"
data.raw["item-subgroup"]["clowns-nuclear-cells"].order = "z"
data.raw["technology"]["plutonium-fuel"].hidden = true
data.raw["recipe"]["plutonium-fuel-recipe"].hidden = true
data.raw["technology"]["radiothermal-fuel-1"].prerequisites = {"plutonium-processing"}
data.raw["technology"]["thorium-module"].prerequisites = {"thorium-ore-processing"}
table.insert(data.raw["technology"]["thorium-ore-processing"].effects, {
    type = "unlock-recipe",
    recipe = "thorium-recipe"
})
table.insert(data.raw["technology"]["thorium-ore-processing"].prerequisites, "MOX-fuel-reprocessing")
data.raw["technology"]["thorium-nuclear-fuel-reprocessing-2"].prerequisites = {"thorium-fuel-reprocessing"}
data.raw["technology"]["thorium-processing"].hidden = true
data.raw["technology"]["thorium-fuel-reprocessing"].prerequisites = {"thorium-ore-processing"}
table.insert(data.raw["technology"]["uranium-processing"].effects, {
    type = "unlock-recipe",
    recipe = "clowns-centrifuging-20%-ore"
})
table.insert(data.raw["technology"]["uranium-processing"].effects, {
    type = "unlock-recipe",
    recipe = "clowns-centrifuging-35%"
})
data.raw["recipe"]["uranium-fuel-cell"].ingredients = {{"35%-uranium", 1}, {"graphite", 19}, {"empty-fuel-cell", 10}}
data.raw["technology"]["mixed-oxide-fuel"].effects = {{
    type = "unlock-recipe",
    recipe = "thorium-mixed-oxide"
}}
data.raw["recipe"]["thorium-mixed-oxide"].icon = graphics .. "thorium-fuel-cell.png"
data.raw["recipe"]["thorium-mixed-oxide"].icon_size = 64
data.raw["recipe"]["thorium-mixed-oxide"].icon_mipmaps = 4
table.insert(data.raw["technology"]["thorium-ore-processing"].effects, {
    type = "unlock-recipe",
    recipe = "thorium-processing"
})
data.raw["technology"]["kovarex-enrichment-process"].hidden = true
data.raw["recipe"]["kovarex-enrichment-process"].hidden = true
data.raw["recipe"]["uranium-processing"].hidden = true

-- remove the uranium-processing recipe from the uranium-processing technology
for i, effect in pairs(data.raw["technology"]["uranium-processing"].effects) do
    if effect.recipe == "uranium-processing" then
        table.remove(data.raw["technology"]["uranium-processing"].effects, i)
    end
end

if mods["RealisticReactors"] then
    data.raw["recipe"]["mixed-oxide"].hidden = true
end

-- change every recipe with the ingredient thorium to thorium-232
for _, recipe in pairs(data.raw["recipe"]) do
    if recipe.ingredients then
        for _, ingredient in pairs(recipe.ingredients) do
            if ingredient.name == "thorium" then
                ingredient.name = "thorium-232"
            end
        end
    end
end
-- do the same thing for the results
for _, recipe in pairs(data.raw["recipe"]) do
    if recipe.results then
        for _, result in pairs(recipe.results) do
            if result.name == "thorium" then
                result.name = "thorium-232"
            end
        end
    end
end

-- change every recipe with the ingredient plutonium to plutonium-239
for _, recipe in pairs(data.raw["recipe"]) do
    if recipe.ingredients then
        for _, ingredient in pairs(recipe.ingredients) do
            if ingredient.name == "plutonium" then
                ingredient.name = "plutonium-239"
            end
        end
    end
end
-- do the same thing for the results
for _, recipe in pairs(data.raw["recipe"]) do
    if recipe.results then
        for _, result in pairs(recipe.results) do
            if result.name == "plutonium" then
                result.name = "plutonium-239"
            end
        end
    end
end
-- give every tech in list the research-data
local list = {"nuclear-fuel-reprocessing-2", "thorium-nuclear-fuel-reprocessing-2", "thorium-ore-processing",
              "thermonuclear-bomb", "advanced-uranium-processing-1", "advanced-uranium-processing-2",
              "radiothermal-fuel-1", "radiothermal-fuel-2", "radiothermal-fuel-3", "nuclear-fuel-2", "nuclear-fuel-3"}
for _, tech in pairs(list) do
    table.insert(data.raw["technology"][tech].unit.ingredients, {
        type = "item",
        name = "research-data",
        amount = 1
    })
end

local list2 = {"centrifuge", "clowns-centrifuging-20%-ore", "clowns-centrifuging-35%", "uranium-fuel-cell"}
-- check if the recipes in the effects are the same as in list2 then remove the recipes in list2 from the nuclear-power tech
for _, tech in pairs(list2) do
    for _, effect in pairs(data.raw["technology"]["nuclear-power"].effects) do
        if effect.recipe == tech then
            table.remove(data.raw["technology"]["nuclear-power"].effects, _)
        end
    end
end

local list3 = {"thorium-nuclear-fuel-reprocessing", "advanced-nuclear-fuel-reprocessing",
               "advanced-thorium-nuclear-fuel-reprocessing", "advanced-thorium-nuclear-fuel-reprocessing|b"}
-- set the subgroup from every recipe in list3 to reprocessing from atomic-overhaul
for _, recipe in pairs(list3) do
    data.raw["recipe"][recipe].subgroup = "reprocessing"
end

data:extend({{
    type = "recipe",
    name = "atomic-bomb",
    enabled = false,
    energy_required = 50,
    ingredients = {{"rocket-control-unit", 10}, {"explosives", 25}, {"uranium-235", 30}, {"plutonium", 15},
                   {"rocket", 3}},
    result = "atomic-bomb"
}})
